FsImage - последняя контрольная точка пространства имен. 

Когда NameNode запускается, он считывает состояние HDFS из файла изображения fsimage, а затем применяет изменения файла журнала изменений. Затем он записывает новое состояние HDFS в fsimage и начинает нормальную работу с пустым файлом редактирования. 

Поскольку NameNode объединяет fsimage и редактирует файлы только во время запуска, файл журнала изменений со временем может стать очень большим в загруженном кластере. Еще одним побочным эффектом увеличения размера файла редактирования является то, что следующий перезапуск NameNode занимает больше времени.

Secondary NameNode периодически объединяет fsimage и файлы журнала редактирования и сохраняет размер журнала изменений в установленных пределах. Обычно он запускается на другом компьютере, чем первичный NameNode, поскольку его требования к памяти находятся в том же порядке, что и первичный NameNode.


Запуск процесса контрольной точки на вторичном NameNode контролируется двумя параметрами конфигурации.

  -- dfs.namenode.checkpoint.period , по умолчанию установленный на 1 час, указывает максимальную задержку между двумя последовательными контрольными точками , и

  -- dfs.namenode.checkpoint.txns , по умолчанию установленный на 1 миллион, определяет количество транзакций без контрольных точек на NameNode, которые вызовут срочную контрольную точку, даже если период контрольной точки не был достигнут.


Вторичный NameNode хранит последнюю контрольную точку в каталоге, который структурирован так же, как каталог первичного NameNode. Таким образом, изображение, отмеченное флажком, всегда готово для чтения первичным NameNode, если это необходимо.